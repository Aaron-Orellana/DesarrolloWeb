{% extends 'core/base.html' %}

{% block content %}
<h4>Crear Nueva Incidencia</h4>

{% if messages %}
    <div class="alert alert-info">
        <ul>
            {% for message in messages %}
                <li>{{ message }}</li>
            {% endfor %}
        </ul>
    </div>
{% endif %}

<form method="post" action="{% url 'incidencia_guardar' %}">
    {% csrf_token %}

    <div class="form-group mb-3">
        <label for="nombre">Nombre:</label>
        <input type="text" id="nombre" name="nombre" class="form-control" placeholder="Ingrese el nombre" required maxlength="100">
    </div>

    <div class="form-group mb-3">
        <label for="descripcion">Descripci贸n:</label>
        <textarea id="descripcion" name="descripcion" rows="3" class="form-control" placeholder="Ingrese la descripci贸n"></textarea>
    </div>

    <div class="form-group mb-3">
        <label for="direccion">Direcci贸n:</label>
        <select id="direccion" name="direccion" class="form-control" required>
            <option value="">Seleccione una direcci贸n</option>
            {% for d in direcciones %}
                <option value="{{ d.direccion_id }}">{{ d.nombre }}</option>
            {% endfor %}
        </select>
    </div>

    <div class="form-group mb-3">
        <label for="departamento">Departamento:</label>
        <select id="departamento" name="departamento" class="form-control" required>
            <option value="">Seleccione un departamento</option>
            {% for dep in departamentos %}
                <option value="{{ dep.departamento_id }}">{{ dep.nombre }}</option>
            {% endfor %}
        </select>
    </div>

    <div class="form-group mb-3">
        <label for="encuesta">Encuesta (opcional):</label>
        <select id="encuesta" name="encuesta" class="form-control">
            <option value="">-- Sin encuesta --</option>
            {% for e in encuestas %}
                <option value="{{ e.encuesta_id }}">{{ e.titulo }}</option>
            {% endfor %}
        </select>
    </div>

    <button type="submit" class="btn btn-primary">Guardar Incidencia</button>
    <a href="{% url 'incidencia_listar' %}" class="btn btn-secondary">Volver al listado</a>
</form>
{% endblock %}
