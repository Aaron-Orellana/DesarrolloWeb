{% extends "core/base.html" %}

{% block content %}
<h2>Rechazar Incidencia</h2>

<form method="post">
  {% csrf_token %}
  {{ form.motivo }}
  <div id="otro-field" style="display: none; margin-top: 10px;">
    {{ form.otro }}
  </div>

  <button type="submit" class="btn btn-dark mt-3">Rechazar</button>
  <a href="/dashboards/territorial/" class="btn btn-dark mt-3">Volver</a>
</form>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const motivoSelect = document.getElementById('id_motivo');
    const otroDiv = document.getElementById('otro-field');

    // Función para mostrar/ocultar el campo "otro"
    function toggleOtroField() {
      const selected = motivoSelect.options[motivoSelect.selectedIndex].text.toLowerCase();
      if (selected.includes('otro')) {
        otroDiv.style.display = 'block';
      } else {
        otroDiv.style.display = 'none';
      }
    }

    // Al cargar la página y al cambiar el valor
    toggleOtroField();
    motivoSelect.addEventListener('change', toggleOtroField);
  });
</script>
{% endblock %}
