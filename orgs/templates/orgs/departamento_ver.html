{% extends 'core/base.html' %}

{% block content %}
<h4>Departamento: {{ departamento.nombre }}</h4>

<table class="table table-bordered">
    <tr>
        <th>Direcci√≥n</th>
        <td>{{ departamento.direccion.nombre }}</td>
    </tr>
    <tr>
        <th>Estado</th>
        <td>
            {% if departamento.estado %}
                <span class="badge bg-success">Activo</span>
            {% else %}
                <span class="badge bg-secondary">Bloqueado</span>
            {% endif %}
        </td>
    </tr>
</table>

<h5>Equipo</h5>
{% with memberships=departamento.memberships.all %}
    {% if memberships %}
        <ul class="list-group mb-3">
            {% for membership in memberships %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <span>{{ membership.usuario_id.user.get_full_name|default:membership.usuario_id.user.username }}</span>
                    {% if membership.es_encargado %}
                        <span class="badge bg-primary">Encargado</span>
                    {% endif %}
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p class="text-muted">Sin miembros registrados.</p>
    {% endif %}
{% endwith %}

<div class="d-flex gap-2">
    <a href="{% url 'departamento_editar' departamento.departamento_id %}" class="btn btn-warning">Editar</a>
    <a href="{% url 'departamento_listar' %}" class="btn btn-secondary">Volver</a>
</div>
{% endblock %}
