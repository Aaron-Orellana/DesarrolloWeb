{% extends 'core/base.html' %}

{% block content %}
<h4>Cuadrilla: {{ cuadrilla.nombre }}</h4>

<table class="table table-bordered">
    <tr>
        <th>Departamento Asignado</th>
        <td>{{ cuadrilla.departamento.nombre }}</td>
    </tr>
    <tr>
        <th>Estado</th>
        <td>
            {% if cuadrilla.estado %}
                <span class="badge bg-success">Activa</span>
            {% else %}
                <span class="badge bg-secondary">Inactiva</span>
            {% endif %}
        </td>
    </tr>
</table>

<h5>Miembros</h5>
{% with memberships=cuadrilla.memberships.all %}
    {% if memberships %}
        <ul class="list-group mb-3">
            {% for membership in memberships %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <span>{{ membership.usuario_id.user.get_full_name|default:membership.usuario_id.user.username }}</span>
                    
                    <span class="badge bg-light text-dark">
                        Desde: {{ membership.desde|date:"d M Y" }}
                    </span>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p class="text-muted">Sin miembros registrados en esta cuadrilla.</p>
    {% endif %}
{% endwith %}

<div class="d-flex gap-2">
    <a href="{% url 'cuadrilla_editar' cuadrilla.cuadrilla_id %}" class="btn btn-warning">Editar</a>
    <a href="{% url 'cuadrilla_listar' %}" class="btn btn-secondary">Volver</a>
</div>
{% endblock %}
